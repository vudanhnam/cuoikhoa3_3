<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" type="text/css" href="register.css"> 
</head>
<body>
    <form id="formRegister">
        <h2>Register</h2>
        <input type="text" id="userName" name="userName" required placeholder="Enter your registration name">
        <input type="email" id="email" name="email" required placeholder="Enter the email"> 
        <input type="tel" id="phone" name="phone" required placeholder="Enter the phone">
        <input type="add" id="address" name="address" required placeholder="Enter the address">
         <label for="gender">Giới tính:</label>
        <select id="gender" name="gender" required>
            <option value="male">Nam</option>
            <option value="female">Nữ</option>
            <option value="other">Khác</option>
        </select> 
        <input type="password" id="password" name="password" required placeholder="Enter the password">
        <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="Enter the password"> 
        <button type="submit" onclick="">Register</button>
        <!-- <button type="button" onclick="ktr()">test</button> -->
    </form>

    <script>
       let frm= document.getElementById("formRegister")
    //    function ktr() {
    //     let userName=document.getElementById("userName").value;
    //     let email=document.getElementById("email").value;
    //     let phone=document.getElementById("phone").value;
    //     let address=document.getElementById("address").value;
    //     let password=document.getElementById("password").value;
    //     let confirmPassword=document.getElementById("confirmPassword").value;
    //     let userId=document.getElementById("userId").value;
        
    //     let newUser={
    //         userName: userName,
    //         email: email,
    //         numbers: phone,
    //         address: address,
    //         password: password,
    //         confirmPassword: confirmPassword,
    //     }
    //     if(localStorage.getItem("users"))
    //     {
    //         let users=JSON.parse(localStorage.getItem("users"));
    //         for(let i=0;i<users.length;i++)
    //         {
    //              if(users[i].userName==newUser.username)
    //              {
    //                   alert("tài khoản đã được đăng ký")
    //                   return
    //              }
                 
    //         }
    //         users.push(newUser);
    //         alert("hahaa")
    //     } 
       
       frm.addEventListener("submit", function(event){ 
        event.preventDefault();
        let userName=document.getElementById("userName").value;
        let email=document.getElementById("email").value;
        let phone=document.getElementById("phone").value;
        let address=document.getElementById("address").value;
        let password=document.getElementById("password").value;
        let confirmPassword=document.getElementById("confirmPassword").value;
        let role="user";      
        if (password !== confirmPassword) {
                alert("Passwords do not match");
                return;
            }
        let newUser={
            id: Date.now() ,
            userName: userName,
            email: email,
            numbers: phone,
            address: address,
            password: password,
            confirmPassword: confirmPassword,
            role: role
        }
        if(localStorage.getItem("users"))
        {
            let users=JSON.parse(localStorage.getItem("users"));
            for(let i=0;i<users.length;i++)
            {
                //alert(users[i].userName," ",newUser.userName);
                 if(users[i].userName==newUser.userName)
                 {
                     alert("tài khoản đã được đăng ký");
                     window.location.href="./login.html";
                     return;
                 }
            }
            users.push(newUser);
            localStorage.setItem("users",JSON.stringify(users));
        }
         else
         {
            //  let users=[newUser];
             localStorage.setItem("users",JSON.stringify([newUser]));
         }
         alert("Đăng ký thành công");
       
        window.location.href="./login.html";
    })
    </script>
</body>
</html>